
{% load crispy_forms_tags %}
{% block content %}
    <!-- Single Page Header start -->
    <div class="container-fluid page-header py-5">
        <h1 class="text-center text-white display-6">Add vehicle</h1>
    </div>
    <!-- Single Page Header End -->

    <div class="container text-center">
        <form method="POST" enctype="multipart/form-data" id="vehicleForm">
            {% csrf_token %}
            {{ vehicle_form|crispy }}

            <!-- Checkbox Tractor -->
            <div class="form-check form-switch my-3 text-start">
                <input class="form-check-input" type="checkbox" id="tractorCheckbox" name="is_tractor">
                <label class="form-check-label fw-bold" for="tractorCheckbox">Tractor</label>
            </div>

            <div id="dimensionForm">
                {{ vehicle_dimension_form|crispy }}
            </div>

            <button type="submit" class="btn btn-outline-primary mt-3">Submit</button>
        </form>
    </div>

    <div class="border-top pt-3 text-center">
        <small class="text-muted">
            Dashboard<a class="ml-2" href="{% url 'dashboard' %}"> Home</a>
        </small>
    </div>

    <!-- Skrypt JS -->
    <script>
        const tractorCheckbox = document.getElementById('tractorCheckbox');

        tractorCheckbox.addEventListener('change', function() {
            const dimensionFields = document.querySelectorAll('#dimensionForm input, #dimensionForm select, #dimensionForm textarea');
            const isDisabled = tractorCheckbox.checked;

            dimensionFields.forEach(field => {
                field.disabled = isDisabled;
                field.classList.toggle('disabled-field', isDisabled);
            });
        });
    </script>

    <!-- Styl dla wyszarzenia -->
    <style>
        .disabled-field {
            background-color: #e9ecef !important;
            color: #6c757d !important;
            cursor: not-allowed;
        }
    </style>
{% endblock content %}
